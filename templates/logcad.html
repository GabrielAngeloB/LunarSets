<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet" />
	<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v={{ timestamp }}">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <title>Login/Cadastro</title>
</head>
<style>
    /* Classes personalizadas para cores de Toast */
    .swal2-toast-danger {
        background-color: #ffc107 !important; /* Amarelo para 'danger' */
		color:black
    }
    .swal2-toast-error {
        background-color: #dc3545 !important; /* Vermelho para 'error' */
		color:white
    }
    .swal2-toast-success {
        background-color: #28a745 !important; /* Verde para 'success' */
		color:white
    }
    .swal2-toast-warning {
        background-color: #ff9800 !important; /* Laranja para 'warning' */
		color:black
    }
    .swal2-toast-info {
        background-color: #17a2b8 !important; /* Azul para 'info' */
		color:white
    }
     body {
        margin: 0;
        color: #6a6f8c;
        background:url(https://th.bing.com/th/id/R.f5771a85739c27900e6b85d862f378be?rik=wPXeVu6wtZ8GFg&pid=ImgRaw&r=0) no-repeat center;
        font: 600 16px/18px 'Open Sans', sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

.login-box{
	width:100%;
	margin:auto;
	max-width:525px;
	min-height:670px;
	position:relative;
	background:url(https://th.bing.com/th/id/R.f5771a85739c27900e6b85d862f378be?rik=wPXeVu6wtZ8GFg&pid=ImgRaw&r=0) no-repeat center;
	box-shadow:0 12px 15px 0 rgba(0,0,0,.24),0 17px 50px 0 rgba(0,0,0,.19);
}
.login-snip{
	width:100%;
	height:100%;
	position:absolute;
	padding:110px 70px 50px 70px;
	background: rgba(20, 20, 20, 0.95); /* Um cinza muito escuro com 95% de opacidade */

}
.login-snip .login,
.login-snip .sign-up-form{
	top:0;
	left:0;
	right:0;
	bottom:0;
	position:absolute;
	transform:rotateY(180deg);
	backface-visibility:hidden;
	transition:all .4s linear;
}
.login-snip .sign-in,
.login-snip .sign-up,
.login-space .group .check{
	display:none;
}
.login-snip .tab,
.login-space .group .label,
.login-space .group .button{
	text-transform:uppercase;
}
.login-snip .tab{
	font-size:22px;
	margin-right:15px;
	padding-bottom:5px;
	margin:0 15px 10px 0;
	display:inline-block;
	border-bottom:2px solid transparent;
}
.login-snip .sign-in:checked + .tab,
.login-snip .sign-up:checked + .tab{
	color:#fff;
	border-color:#1161ee;
}
.login-space{
	min-height:345px;
	position:relative;
	perspective:1000px;
	transform-style:preserve-3d;
}
.login-space .group{
	margin-bottom:15px;
}
.login-space .group .label,
.login-space .group .input,
.login-space .group .button{
	width:100%;
	color:#fff;
	display:block;
}
.login-space .group .input,
.login-space .group .button{
	border:none;
	padding:15px 20px;
	border-radius:25px;
	background:rgba(255,255,255,.1);
}
.login-space .group input[data-type="password"]{
	text-security:circle;
	-webkit-text-security:circle;
}
.login-space .group .label{
	color:#aaa;
	font-size:12px;
}
.login-space .group .button{
	background:#1161ee;
}
.login-space .group label .icon{
	width:15px;
	height:15px;
	border-radius:2px;
	position:relative;
	display:inline-block;
	background:rgba(255,255,255,.1);
}
.login-space .group label .icon:before,
.login-space .group label .icon:after{
	content:'';
	width:10px;
	height:2px;
	background:#fff;
	position:absolute;
	transition:all .2s ease-in-out 0s;
}
.login-space .group label .icon:before{
	left:3px;
	width:5px;
	bottom:6px;
	transform:scale(0) rotate(0);
}
.login-space .group label .icon:after{
	top:6px;
	right:0;
	transform:scale(0) rotate(0);
}
.login-space .group .check:checked + label{
	color:#fff;
}
.login-space .group .check:checked + label .icon{
	background:#1161ee;
}
.login-space .group .check:checked + label .icon:before{
	transform:scale(1) rotate(45deg);
}
.login-space .group .check:checked + label .icon:after{
	transform:scale(1) rotate(-45deg);
}
.login-snip .sign-in:checked + .tab + .sign-up + .tab + .login-space .login{
	transform:rotate(0);
}
.login-snip .sign-up:checked + .tab + .login-space .sign-up-form{
	transform:rotate(0);
}

*,:after,:before{box-sizing:border-box}
.clearfix:after,.clearfix:before{content:'';display:table}
.clearfix:after{clear:both;display:block}
a{color:inherit;text-decoration:none}


.hr{
	height:2px;
	margin:60px 0 50px 0;
	background:rgba(255,255,255,.2);
}
.foot{
	text-align:center;
}
.card{
	width: 500px;
}

::placeholder{
color: #b3b3b3;
}
    /* Estilos para exibir apenas a aba ativa */
    .login-space > div { display: none; }
    .sign-in:checked ~ .login-space .login { display: block; }
    .sign-up:checked ~ .login-space .sign-up-form { display: block; }

            /* Cores para bordas */
            .border-valid {
            border: 2px solid #28a745 !important; /* Verde para válido */
        }
        .border-invalid {
            border: 2px solid #dc3545 !important; /* Vermelho para inválido */
        }
    
</style>

<body>

    <div class="row">
        <div class="col-md-6 p-0">
            <div class="card">
                <div class="login-box">
                    <div class="login-snip">
                        <!-- Abas de navegação entre login e registro -->
                        <input id="tab-1" type="radio" name="tab" class="sign-in" checked>
                        <label for="tab-1" class="tab">Login</label>
                        <input id="tab-2" type="radio" name="tab" class="sign-up">
                        <label for="tab-2" class="tab">Registrar</label>
    
                        <div class="login-space">
                            <!-- Formulário de Login -->
                            <div class="login">
                                <form method="POST" action="{{ url_for('logcad') }}">
                                    <input type="hidden" name="action" value="login">
                                    <div class="group">
                                        <label for="user" class="label" style="margin-top:20px; margin-bottom:4px;">Email</label>
                                        <input id="user" type="email" name="email" class="input" style="font-weight:bold" placeholder="Insira seu email" required>
                                    </div>
                                    <div class="group">
                                        <label for="pass" class="label" style="margin-bottom:4px;">Senha</label>
                                        <input id="pass" type="password" name="senha" class="input" data-type="password" style="font-weight:bold" placeholder="Insira sua senha" required minlength="8">
                                    </div>
                                    <div class="group" style="position:relative; top:20px; cursor:pointer;">
                                        <button type="submit" class="button" name="action" value="login">Entrar</button>
                                    </div>
                                    <div class="hr"></div>
                                </form>
                            </div>
    
                            <!-- Formulário de Registro -->
                            <div class="sign-up-form">
                                <form method="POST" action="{{ url_for('logcad') }}">
                                    <input type="hidden" name="action" value="register">
                                    <div class="group">
                                        <label for="user" class="label" style="margin-top:20px; margin-bottom:4px;">Nome</label>
                                        <input id="user" type="text" class="input" name="nome1" style="font-weight:bold" placeholder="Crie seu nome" minlength="5" maxlength="20" required>
                                    </div>
                                    <div class="group">
                                        <label for="pass" class="label" style="margin-bottom:4px;">Email</label>
                                        <input id="pass" type="text" name="email1" class="input" style="font-weight:bold" placeholder="Insira seu email" required>
                                    </div>
                                    <div class="group">
                                        <label for="pass" class="label" style="margin-bottom:4px;">Senha</label>
                                        <input id="pass" type="password" name="senha1" class="input" data-type="password" style="font-weight:bold" placeholder="Crie sua senha" minlength="8" required>
                                    </div>
                                    <div class="group">
                                        <label for="pass" class="label" style="margin-bottom:4px;">Repita sua senha</label>
                                        <input id="pass" type="password" class="input" name="confirm_senha" data-type="password" style="font-weight:bold" placeholder="Repita sua senha" minlength="8" required>
                                    </div>
                                    <div class="group" style="position:relative; top:20px; cursor:pointer;">
                                        <button type="submit" class="button" name="action" value="register">Registrar</button>
                                    </div>
                                    <div class="hr"></div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    </body>
        
    
	<script>
        document.addEventListener('DOMContentLoaded', function() {
            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                iconColor: 'white',
                showConfirmButton: false,
                timer: 1500,
                timerProgressBar: true,
            });

            // Função que mapeia categorias para classes CSS
            function getToastClass(category) {
                const classes = {
                    success: 'swal2-toast-success',
                    danger: 'swal2-toast-danger',
                    error: 'swal2-toast-error',
                    warning: 'swal2-toast-warning',
                    info: 'swal2-toast-info'
                };
                return classes[category] || 'swal2-toast-info';
            }

            // Verifica e exibe as mensagens de flash
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        Toast.fire({
                            icon: "{{ 'warning' if category == 'danger' else category }}", // Define o ícone
                            title: "{{ message }}",
                            customClass: {
                                popup: getToastClass("{{ category }}") // Aplica a cor baseada na categoria
                            }
                        });
                    {% endfor %}
                {% endif %}
            {% endwith %}
        });
    </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    // Função que aplica a classe de borda com base nos critérios de validade
    function validateField(input) {
        const minLength = input.getAttribute('minlength');
        const maxLength = input.getAttribute('maxlength');
        const valueLength = input.value.length;

        if ((minLength && valueLength >= minLength) || (maxLength && valueLength <= maxLength)) {
            input.classList.add('border-valid');
            input.classList.remove('border-invalid');
        } else {
            input.classList.add('border-invalid');
            input.classList.remove('border-valid');
        }
    }

    // Função para validar o email com regex
    function validateEmail(input) {
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (emailPattern.test(input.value)) {
            input.classList.add('border-valid');
            input.classList.remove('border-invalid');
        } else {
            input.classList.add('border-invalid');
            input.classList.remove('border-valid');
        }
    }

    // Verificação de campos com minLength e maxLength a cada tecla pressionada
    document.querySelectorAll('input[minlength], input[maxlength]').forEach(input => {
        input.addEventListener('keyup', () => validateField(input));
    });

    // Verificação específica para campos de email a cada tecla pressionada
    document.querySelectorAll('input[type="email"]').forEach(input => {
        input.addEventListener('keyup', () => validateEmail(input));
    });
});
</script>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-OgwmRWzUGE9VNw6aJfwdgnvwTbkKcwQzT5nlwGkE2riVVkJRLaXvBVbvTqQ8PwHd" crossorigin="anonymous" defer></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous" async></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js" async></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous" defer></script>

</html>